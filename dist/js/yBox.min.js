/*! yBox - v3.2 - 23/05/2022
* By Yuval Ashkenazi
* https://github.com/yuval123123/yBox-jQuery */
jQuery("body").on("click",".yBox",function(e){e.preventDefault();e.stopPropagation();var t=jQuery(this);"undefined"!=typeof beforeYboxOpen&&beforeYboxOpen(t),jQuery(".yBox.yBoxFocus").removeClass("yBoxFocus"),t.addClass("yBoxFocus"),yBox("",t),"undefined"!=typeof yBoxIsOpen&&yBoxIsOpen(t)});var yUrl=new URL(document.currentScript.src),yLang=yUrl.searchParams.get("lang"),strings={close:"Close",next:"Next",prev:"Prev"};"he"!=yLang&&"he-IL"!=yLang||(yLang="he",strings={close:"סגירה",next:"הבא",prev:"הקודם"});var url=new URL(window.location.href),systemMessage=url.searchParams.get("systemmessage");function yBox(e,t,o){var a=!0;if(void 0===o)o="";if(void 0!==t&&t||(a=!1),a){o=t.data("ybox-class")||"";var r=t.attr("href")}var s='<div class="yBoxOverlay'+("he"==yLang?" yBoxRTL":"")+'">\t\t\t\t\t<div class="yBoxFrame '+o+'">\t\t\t\t\t\t<button type="button" class="closeYboxOnFocus"></button>\t\t\t\t\t\t<div class="insertYboxAjaxHere" tabindex="0"></div>\t\t\t\t\t\t<button type="button" class="closeYbox" title="'+strings.close+'"></button>\t\t\t\t\t\t<button type="button" class="closeYboxOnFocus"></button>\t\t\t\t\t</div>\t\t\t\t</div>';jQuery(".yBoxFrame").length?jQuery(".yBoxFrame.yBoxImgWrap").length?(jQuery(".yBoxFramePlaceHolder").length&&(jQuery(".yBoxFramePlaceHolder").before(jQuery(".insertYboxAjaxHere").html()),jQuery(".yBoxFramePlaceHolder").remove()),jQuery(".insertYboxAjaxHere").html(""),insertPopHtml(t,a,r,e)):jQuery(".insertYboxAjaxHere").animate({opacity:0},function(){var o=jQuery(this);setTimeout(function(){jQuery(".yBoxFramePlaceHolder").length&&(jQuery(".yBoxFramePlaceHolder").before(jQuery(".insertYboxAjaxHere").html()),jQuery(".yBoxFramePlaceHolder").remove()),o.html(""),insertPopHtml(t,a,r,e),jQuery(".insertYboxAjaxHere").animate({opacity:1})},200)}):(jQuery("body").append(s),insertPopHtml(t,a,r,e),setTimeout(function(){jQuery(".yBoxOverlay").addClass("active")},200))}function insertPopHtml(e,t,o,a){if(t){if(e.hasClass("yBox_iframe")){if(jQuery(".yBoxFrame").addClass("yBoxIframeWrap"),o.toLowerCase().indexOf("youtube")>-1||o.toLowerCase().indexOf("youtu.be")>-1){var r=o.replace(/^[^v]+v.(.{11}).*/,"$1").replace("https://youtu.be/","").replace(/.*youtube.com\/embed\//,"");o="https://www.youtube.com/embed/"+r+"?wmode=transparent&rel=0&autoplay=1&hl="+yLang}jQuery(".yBoxFrame .insertYboxAjaxHere").html('<iframe src="'+o+'" frameborder="0" wmode="Opaque" allow="autoplay" allowfullscreen class="yBoxIframe"></iframe>')}else if(e.hasClass("yBox_video"))jQuery(".yBoxFrame").addClass("yBoxIframeWrap"),jQuery(".yBoxFrame .insertYboxAjaxHere").html('<video class="yBoxVideo" autoplay controls preload plays-inline playsinline><source src="'+o+'" type="video/mp4" /></video>');else if(e.hasClass("yBox_ajax"))jQuery.get(o,function(e){jQuery(".insertYboxAjaxHere").addClass("isAjax").html(e)});else if(-1==o.indexOf("#")){jQuery(".yBoxFrame").addClass("yBoxImgWrap"),jQuery(".insertYboxAjaxHere").append('<div style="text-align:center;position:absolute;right:0;left:0;top:0;bottom:0;"><div class="yBoxLoader"></div></div>');var s=new Image;s.src=o,s.className="yBoxImg",s.onload=function(){var t=e.data("ybox-group"),a=e.data("ybox-alt")||"",r='<div class="yBoxImgZoom"><img src="'+o+'" alt="'+a+'" class="yBoxImg" /></div>';t&&jQuery('.yBox[data-ybox-group="'+t+'"]').length>1&&(r='<button type="button" class="yBoxNextImg" title="'+strings.next+'"></button>'+r+'<button type="button" class="yBoxPrevImg" title="'+strings.prev+'"></button>'),jQuery(".insertYboxAjaxHere").html(r),window.screen.width<=767&&zoom({zoom:"yBoxImgZoom"}),jQuery(".yBoxNextImg").click(function(t){yBoxNext(e)}),jQuery(".yBoxPrevImg").click(function(t){yBoxPrev(e)})}}else if(jQuery(o).after('<div class="yBoxFramePlaceHolder"></div>'),jQuery(".insertYboxAjaxHere.isAjax").length){var i='<div id="'+jQuery(o).attr("id")+'">'+jQuery(o).html()+"</div>";jQuery(".insertYboxAjaxHere").html(i).removeClass("isAjax")}else jQuery(o).appendTo(".insertYboxAjaxHere");window.screen.width>991&&setTimeout(function(){e.data("focus")?jQuery(".insertYboxAjaxHere ."+e.data("focus")).focus():jQuery(".insertYboxAjaxHere iframe, .insertYboxAjaxHere a, .insertYboxAjaxHere input, .insertYboxAjaxHere select:not(.select2), .insertYboxAjaxHere .select2-selection, .insertYboxAjaxHere button").first().focus()},500)}else jQuery(".insertYboxAjaxHere").html(a)}function yBoxNext(e){var t,o=e.data("ybox-group"),a=!1;jQuery('.yBox[data-ybox-group="'+o+'"]:not(.swiper-slide-duplicate)').each(function(r){a||jQuery(this).attr("href")==e.attr("href")&&(a=!0,t=jQuery('.yBox[data-ybox-group="'+o+'"]:not(.swiper-slide-duplicate)').eq(r+1).length?jQuery('.yBox[data-ybox-group="'+o+'"]:not(.swiper-slide-duplicate)').eq(r+1):jQuery('.yBox[data-ybox-group="'+o+'"]:not(.swiper-slide-duplicate)').eq(0))}),t&&(jQuery("yBox").data("focus",""),t.data("focus","yBoxNextImg"),t.trigger("click"))}function yBoxPrev(e){var t,o=e.data("ybox-group");jQuery('.yBox[data-ybox-group="'+o+'"]:not(.swiper-slide-duplicate)').each(function(a){if(jQuery(this).attr("href")==e.attr("href"))if(jQuery('.yBox[data-ybox-group="'+o+'"]:not(.swiper-slide-duplicate)').eq(a-1).length)t=jQuery('.yBox[data-ybox-group="'+o+'"]:not(.swiper-slide-duplicate)').eq(a-1);else{var r=jQuery('.yBox[data-ybox-group="'+o+'"]:not(.swiper-slide-duplicate)').length;t=jQuery('.yBox[data-ybox-group="'+o+'"]:not(.swiper-slide-duplicate)').eq(r-1)}}),t&&(jQuery("yBox").data("focus",""),t.data("focus","yBoxPrevImg"),t.trigger("click"))}systemMessage&&(yBox(systemMessage,!1,"yBoxContentFrame"),setTimeout(function(){var e=new URLSearchParams(window.location.search);e.delete("systemmessage"),e.toString()&&(e="?"+e.toString());var t=window.location.pathname+e;window.history.pushState("","",t)},500)),jQuery("body").on("click",".yBoxOverlay",function(e){(e.target.className.indexOf("yBoxOverlay yBoxRTL active")>-1||e.target.className.indexOf("yBoxOverlay active")>-1||"closeYbox"==e.target.className)&&(jQuery(".yBoxOverlay").removeClass("active"),jQuery(".yBoxFocus").focus(),setTimeout(function(){jQuery(".yBoxFramePlaceHolder").length&&(jQuery(".yBoxFramePlaceHolder").before(jQuery(".insertYboxAjaxHere").html()),jQuery(".yBoxFramePlaceHolder").remove()),jQuery(".yBoxOverlay").remove()},600))}),jQuery("body").on("focus",".closeYboxOnFocus",function(){jQuery(".closeYbox").trigger("click")}),jQuery(document).keyup(function(e){39===e.keyCode&&yBoxPrev(jQuery('.yBox[href="'+jQuery(".yBoxImg").attr("src")+'"]')),37===e.keyCode&&yBoxNext(jQuery('.yBox[href="'+jQuery(".yBoxImg").attr("src")+'"]')),27===e.keyCode&&jQuery(".closeYbox").trigger("click")});