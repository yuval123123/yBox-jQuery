/*! yBox - v3.3 - 25/05/2022
* By Yuval Ashkenazi
* https://github.com/yuval123123/yBox-jQuery */
jQuery("body").on("click",".yBox",function(e){e.preventDefault(),e.stopPropagation();var o=jQuery(this);"undefined"!=typeof beforeYboxOpen&&beforeYboxOpen(o),jQuery(".yBox.yBoxFocus").removeClass("yBoxFocus"),o.addClass("yBoxFocus"),yBox("",o),"undefined"!=typeof yBoxIsOpen&&yBoxIsOpen(o)});var yUrl=new URL(document.currentScript.src),yLang=yUrl.searchParams.get("lang"),strings={close:"Close",next:"Next",prev:"Prev"};"he"!=yLang&&"he-IL"!=yLang||(yLang="he",strings={close:"סגירה",next:"הבא",prev:"הקודם"});var url=new URL(window.location.href),systemMessage=url.searchParams.get("systemmessage");function yBox(e,o,t){var r=!0;if(void 0===t)t="";if(void 0!==o&&o||(r=!1),r){t=o.data("ybox-class")||"";var a=o.attr("href")}var s='<div class="yBoxOverlay'+("he"==yLang?" yBoxRTL":"")+'">\t\t\t\t\t<div class="yBoxFrame '+t+'">\t\t\t\t\t\t<button type="button" class="closeYboxOnFocus"></button>\t\t\t\t\t\t<div class="insertYboxAjaxHere" tabindex="0"></div>\t\t\t\t\t\t<button type="button" class="closeYbox" title="'+strings.close+'"></button>\t\t\t\t\t\t<button type="button" class="closeYboxOnFocus"></button>\t\t\t\t\t</div>\t\t\t\t</div>';jQuery(".yBoxFrame").length?jQuery(".yBoxFrame.yBoxImgWrap").length?(jQuery(".yBoxFramePlaceHolder").length&&(jQuery(".yBoxFramePlaceHolder").before(jQuery(".insertYboxAjaxHere").html()),jQuery(".yBoxFramePlaceHolder").remove()),jQuery(".insertYboxAjaxHere").html(""),insertPopHtml(o,r,a,e)):jQuery(".insertYboxAjaxHere").animate({opacity:0},function(){var t=jQuery(this);setTimeout(function(){jQuery(".yBoxFramePlaceHolder").length&&(jQuery(".yBoxFramePlaceHolder").before(jQuery(".insertYboxAjaxHere").html()),jQuery(".yBoxFramePlaceHolder").remove()),t.html(""),insertPopHtml(o,r,a,e),jQuery(".insertYboxAjaxHere").animate({opacity:1})},200)}):(jQuery("body").append(s),insertPopHtml(o,r,a,e),setTimeout(function(){jQuery(".yBoxOverlay").addClass("active")},200))}function insertPopHtml(e,o,t,r){if(o){if(e.hasClass("yBox_iframe")){if(jQuery(".yBoxFrame").addClass("yBoxIframeWrap"),t.toLowerCase().indexOf("youtube")>-1||t.toLowerCase().indexOf("youtu.be")>-1){var a=t.replace(/^[^v]+v.(.{11}).*/,"$1").replace("https://youtu.be/","").replace(/.*youtube.com\/embed\//,"");t="https://www.youtube.com/embed/"+a+"?wmode=transparent&rel=0&autoplay=1&hl="+yLang}if(t.toLowerCase().indexOf("vimeo")>-1){var s=t.replace(/[^0-9]/g,"");t="https://player.vimeo.com/video/"+s+"?autoplay=1"}jQuery(".yBoxFrame .insertYboxAjaxHere").html('<iframe src="'+t+'" frameborder="0" wmode="Opaque" allow="autoplay" allowfullscreen class="yBoxIframe"></iframe>')}else if(e.hasClass("yBox_video"))jQuery(".yBoxFrame").addClass("yBoxIframeWrap"),jQuery(".yBoxFrame .insertYboxAjaxHere").html('<video class="yBoxVideo" autoplay controls preload plays-inline playsinline><source src="'+t+'" type="video/mp4" /></video>');else if(e.hasClass("yBox_ajax"))jQuery.get(t,function(e){jQuery(".insertYboxAjaxHere").addClass("isAjax").html(e)});else if(-1==t.indexOf("#")){jQuery(".yBoxFrame").addClass("yBoxImgWrap"),jQuery(".insertYboxAjaxHere").append('<div style="text-align:center;position:absolute;right:0;left:0;top:0;bottom:0;"><div class="yBoxLoader"></div></div>');var y=new Image;y.src=t,y.className="yBoxImg",y.onload=function(){var o=e.data("ybox-group"),r=e.data("ybox-alt")||"",a='<div class="yBoxImgZoom"><img src="'+t+'" alt="'+r+'" class="yBoxImg" /></div>';o&&jQuery('.yBox[data-ybox-group="'+o+'"]').length>1&&(a='<button type="button" class="yBoxNextImg" title="'+strings.next+'"></button>'+a+'<button type="button" class="yBoxPrevImg" title="'+strings.prev+'"></button>'),jQuery(".insertYboxAjaxHere").html(a),window.screen.width<=767&&zoom({zoom:"yBoxImgZoom"}),jQuery(".yBoxNextImg").click(function(o){yBoxNext(e)}),jQuery(".yBoxPrevImg").click(function(o){yBoxPrev(e)})}}else if(jQuery(t).after('<div class="yBoxFramePlaceHolder"></div>'),jQuery(".insertYboxAjaxHere.isAjax").length){var i='<div id="'+jQuery(t).attr("id")+'">'+jQuery(t).html()+"</div>";jQuery(".insertYboxAjaxHere").html(i).removeClass("isAjax")}else jQuery(t).appendTo(".insertYboxAjaxHere");window.screen.width>991&&setTimeout(function(){e.data("focus")?jQuery(".insertYboxAjaxHere ."+e.data("focus")).focus():jQuery(".insertYboxAjaxHere iframe, .insertYboxAjaxHere a, .insertYboxAjaxHere input, .insertYboxAjaxHere select:not(.select2), .insertYboxAjaxHere .select2-selection, .insertYboxAjaxHere button").first().focus()},500)}else jQuery(".insertYboxAjaxHere").html(r)}function yBoxNext(e){var o,t=e.data("ybox-group"),r=!1;jQuery('.yBox[data-ybox-group="'+t+'"]:not(.swiper-slide-duplicate)').each(function(a){r||jQuery(this).attr("href")==e.attr("href")&&(r=!0,o=jQuery('.yBox[data-ybox-group="'+t+'"]:not(.swiper-slide-duplicate)').eq(a+1).length?jQuery('.yBox[data-ybox-group="'+t+'"]:not(.swiper-slide-duplicate)').eq(a+1):jQuery('.yBox[data-ybox-group="'+t+'"]:not(.swiper-slide-duplicate)').eq(0))}),o&&(jQuery("yBox").data("focus",""),o.data("focus","yBoxNextImg"),o.trigger("click"))}function yBoxPrev(e){var o,t=e.data("ybox-group");jQuery('.yBox[data-ybox-group="'+t+'"]:not(.swiper-slide-duplicate)').each(function(r){if(jQuery(this).attr("href")==e.attr("href"))if(jQuery('.yBox[data-ybox-group="'+t+'"]:not(.swiper-slide-duplicate)').eq(r-1).length)o=jQuery('.yBox[data-ybox-group="'+t+'"]:not(.swiper-slide-duplicate)').eq(r-1);else{var a=jQuery('.yBox[data-ybox-group="'+t+'"]:not(.swiper-slide-duplicate)').length;o=jQuery('.yBox[data-ybox-group="'+t+'"]:not(.swiper-slide-duplicate)').eq(a-1)}}),o&&(jQuery("yBox").data("focus",""),o.data("focus","yBoxPrevImg"),o.trigger("click"))}systemMessage&&(yBox(systemMessage,!1,"yBoxContentFrame"),setTimeout(function(){var e=new URLSearchParams(window.location.search);e.delete("systemmessage"),e.toString()&&(e="?"+e.toString());var o=window.location.pathname+e;window.history.pushState("","",o)},500)),jQuery("body").on("click",".yBoxOverlay",function(e){(e.target.className.indexOf("yBoxOverlay yBoxRTL active")>-1||e.target.className.indexOf("yBoxOverlay active")>-1||"closeYbox"==e.target.className)&&(jQuery(".yBoxOverlay").removeClass("active"),jQuery(".yBoxFocus").focus(),setTimeout(function(){jQuery(".yBoxFramePlaceHolder").length&&(jQuery(".yBoxFramePlaceHolder").before(jQuery(".insertYboxAjaxHere").html()),jQuery(".yBoxFramePlaceHolder").remove()),jQuery(".yBoxOverlay").remove()},600))}),jQuery("body").on("focus",".closeYboxOnFocus",function(){jQuery(".closeYbox").trigger("click")}),jQuery(document).keyup(function(e){39===e.keyCode&&yBoxPrev(jQuery('.yBox[href="'+jQuery(".yBoxImg").attr("src")+'"]')),37===e.keyCode&&yBoxNext(jQuery('.yBox[href="'+jQuery(".yBoxImg").attr("src")+'"]')),27===e.keyCode&&jQuery(".closeYbox").trigger("click")});