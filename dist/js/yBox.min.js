function yBox(e,t){var o="",a=!0;if(void 0===t&&(a=!1),a){o=t.data("ybox-class")||"";var r=t.attr("href")}var i='<div class="yBoxOverlay">\t\t\t\t\t<div class="yBoxFrame '+o+'">\t\t\t\t\t\t<div class="insertYboxAjaxHere"></div>\t\t\t\t\t\t<button type="button" class="closeYbox" title="Close"></button>\t\t\t\t\t</div>\t\t\t\t</div>';$(".yBoxFrame").length?$(".yBoxFrame.yBoxImgWrap").length?($(".yBoxFramePlaceHolder").length&&($(".yBoxFramePlaceHolder").before($(".insertYboxAjaxHere").html()),$(".yBoxFramePlaceHolder").remove()),$(".insertYboxAjaxHere").html(""),insertPopHtml(t,a,r,e)):$(".insertYboxAjaxHere").animate({opacity:0},function(){var o=$(this);setTimeout(function(){$(".yBoxFramePlaceHolder").length&&($(".yBoxFramePlaceHolder").before($(".insertYboxAjaxHere").html()),$(".yBoxFramePlaceHolder").remove()),o.html(""),insertPopHtml(t,a,r,e),$(".insertYboxAjaxHere").animate({opacity:1})},200)}):($("body").append(i),insertPopHtml(t,a,r,e),setTimeout(function(){$(".yBoxOverlay").addClass("active")},200))}function insertPopHtml(e,t,o,a){if(t)if(e.hasClass("yBox_iframe")){if($(".yBoxFrame").addClass("yBoxIframeWrap"),o.toLowerCase().indexOf("youtube")>-1||o.toLowerCase().indexOf("youtu.be")>-1){var r=o.replace(/^[^v]+v.(.{11}).*/,"$1").replace("https://youtu.be/","").replace(/.*youtube.com\/embed\//,"");o="https://www.youtube.com/embed/"+r+"?wmode=transparent&rel=0&autoplay=1"}$(".yBoxFrame .insertYboxAjaxHere").html('<iframe src="'+o+'" frameborder="0" wmode="Opaque" allow="autoplay" allowfullscreen class="yBoxIframe"></iframe>')}else if(e.hasClass("yBox_ajax"))$.get(o,function(e){$(".insertYboxAjaxHere").html(e)});else if(-1==o.indexOf("#")){$(".yBoxFrame").addClass("yBoxImgWrap"),$(".insertYboxAjaxHere").append('<div style="text-align:center;position:absolute;right:0;left:0;top:0;bottom:0;"><div class="yBoxLoader"></div></div>');var i=new Image;i.src=o,i.className="yBoxImg",i.onload=function(){var t='<div class="yBoxImgZoom"><img src="'+o+'" alt="" class="yBoxImg" /></div>',a=e.data("ybox-group");a&&$('.yBox[data-ybox-group="'+a+'"]').length>1&&(t='<button type="button" class="yBoxNextImg" title="Next"></button>'+t+'<button type="button" class="yBoxPrevImg" title="Prev"></button>'),$(".insertYboxAjaxHere").html(t),window.screen.width<=767&&zoom({zoom:"yBoxImgZoom"}),$(".yBoxNextImg").click(function(t){myNextPopup(e)}),$(".yBoxPrevImg").click(function(t){myPrevPopup(e)})}}else $(o).after('<div class="yBoxFramePlaceHolder"></div>'),$(o).appendTo(".insertYboxAjaxHere");else $(".insertYboxAjaxHere").html(a)}function myNextPopup(e){var t,o=e.data("ybox-group"),a=!1;$('.yBox[data-ybox-group="'+o+'"]:not(.swiper-slide-duplicate)').each(function(r){a||$(this).attr("href")==e.attr("href")&&(a=!0,t=$('.yBox[data-ybox-group="'+o+'"]:not(.swiper-slide-duplicate)').eq(r+1).length?$('.yBox[data-ybox-group="'+o+'"]:not(.swiper-slide-duplicate)').eq(r+1):$('.yBox[data-ybox-group="'+o+'"]:not(.swiper-slide-duplicate)').eq(0))}),t&&t.trigger("click")}function myPrevPopup(e){var t,o=e.data("ybox-group");$('.yBox[data-ybox-group="'+o+'"]:not(.swiper-slide-duplicate)').each(function(a){if($(this).attr("href")==e.attr("href"))if($('.yBox[data-ybox-group="'+o+'"]:not(.swiper-slide-duplicate)').eq(a-1).length)t=$('.yBox[data-ybox-group="'+o+'"]:not(.swiper-slide-duplicate)').eq(a-1);else{var r=$('.yBox[data-ybox-group="'+o+'"]:not(.swiper-slide-duplicate)').length;t=$('.yBox[data-ybox-group="'+o+'"]:not(.swiper-slide-duplicate)').eq(r-1)}}),t&&t.trigger("click")}$("body").on("click",".yBox",function(e){e.preventDefault(),yBox("",$(this))}),$("body").on("click",".yBoxOverlay",function(e){"yBoxOverlay active"!=e.target.className&&"closeYbox"!=e.target.className||($(".yBoxOverlay").removeClass("active"),setTimeout(function(){$(".yBoxFramePlaceHolder").length&&($(".yBoxFramePlaceHolder").before($(".insertYboxAjaxHere").html()),$(".yBoxFramePlaceHolder").remove()),$(".yBoxOverlay").remove()},600))}),$(document).keyup(function(e){39===e.keyCode&&myPrevPopup($('.yBox[href="'+$(".yBoxImg").attr("src")+'"]')),37===e.keyCode&&myNextPopup($('.yBox[href="'+$(".yBoxImg").attr("src")+'"]')),27===e.keyCode&&$(".closeYbox").trigger("click")});